{% extends "base.html" %}

{% block title %}AI Comment Analysis Dashboard{% endblock %}

{% block content %}

<div class="max-w-6xl mx-auto py-8 px-4">

  <!-- ヘッダーセクション（Pricing Plans ボタンのみ） -->
  <header class="mb-10 text-center">
    <h1 class="text-3xl font-bold mb-3 text-gray-900">
      AI Comment Analysis Dashboard
    </h1>
    <p class="text-sm text-gray-500 mb-6">
      YouTube コメントのエンゲージメントを 3D で可視化し、一覧で確認できます。
    </p>
  </header>

  {% if graphic_3d %}
  <div class="flex justify-center mb-10">
    <img src="data:image/png;base64,{{ graphic_3d }}" alt="Chart" class="rounded-xl border border-gray-200 shadow" />
  </div>
  {% endif %}

  <section class="bg-white shadow rounded-2xl p-6">
    <h2 class="text-xl font-semibold mb-4">Comment Data</h2>
    <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-gray-100">
        <tr>
          <th class="px-4 py-2 text-left text-sm font-semibold text-gray-700">Author</th>
          <th class="px-4 py-2 text-left text-sm font-semibold text-gray-700">Comment</th>
          <th class="px-4 py-2 text-right text-sm font-semibold text-gray-700">Likes</th>
          <th class="px-4 py-2 text-right text-sm font-semibold text-gray-700">Replies</th>
          <th class="px-4 py-2 text-right text-sm font-semibold text-gray-700">Created</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-100">
        {% for c in comments %}
        <tr class="hover:bg-gray-50 transition">
          <td class="px-4 py-2 text-sm font-medium text-gray-800">{{ c.author }}</td>
          <td class="px-4 py-2 text-sm text-gray-700">{{ c.comment_text|truncatechars:80 }}</td>
          <td class="px-4 py-2 text-sm text-right text-gray-700">{{ c.like_count }}</td>
          <td class="px-4 py-2 text-sm text-right text-gray-700">{{ c.reply_count }}</td>
          <td class="px-4 py-2 text-sm text-right text-gray-500">{{ c.created_at|date:"Y-m-d H:i" }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </section>

</div>

{% endblock %}
