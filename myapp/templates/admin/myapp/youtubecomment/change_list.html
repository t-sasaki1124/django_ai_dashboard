{% extends "admin/change_list.html" %}

{% block object-tools %}
{{ block.super }}

<!-- ç¾åœ¨ã®ãƒ—ãƒ©ãƒ³æƒ…å ±è¡¨ç¤º -->
<div style="margin-top: 10px; margin-bottom: 15px; padding: 12px; background-color: #f5f5f5; border-left: 4px solid #2196F3; border-radius: 4px;">
  <strong style="color: #333;">ç¾åœ¨ã®ãƒ—ãƒ©ãƒ³:</strong>
  {% if current_plan %}
    <span style="color: #2196F3; font-weight: bold; margin-left: 8px;">{{ current_plan.display_name }}</span>
    {% if current_plan.price > 0 %}
      <span style="color: #666; margin-left: 8px;">(Â¥{{ current_plan.price }}/æœˆ)</span>
    {% else %}
      <span style="color: #666; margin-left: 8px;">(ç„¡æ–™)</span>
    {% endif %}
  {% else %}
    <span style="color: #999; margin-left: 8px;">æœªè¨­å®šï¼ˆç„¡æ–™ãƒ—ãƒ©ãƒ³ï¼‰</span>
  {% endif %}
  <a href="/pricing/" style="margin-left: 12px; color: #2196F3; text-decoration: none; font-size: 12px;">ãƒ—ãƒ©ãƒ³ã‚’å¤‰æ›´ã™ã‚‹ â†’</a>
</div>

<div style="margin-top: 10px;">
  <button id="toggleCsvForm" type="button" class="button" style="background-color:#4CAF50; color:white;">
    Import CSV
  </button>
  <button id="toggleJsonForm" type="button" class="button" style="background-color:#2196F3; color:white;">
    Import JSON
  </button>

  <!-- CSV upload form -->
  <form id="csvUploadForm" method="post" enctype="multipart/form-data"
        action="import-csv/" style="display:none; margin-top:10px;">
    {% csrf_token %}
    <input type="file" name="csv_file" accept=".csv" required>
    <button type="submit" class="button" style="background-color:#4CAF50; color:white;">
      Upload CSV
    </button>
  </form>

  <!-- JSON upload form -->
  <form id="jsonUploadForm" method="post" enctype="multipart/form-data" style="display:none; margin-top:10px;">
    {% csrf_token %}
    <input type="file" name="json_file" accept=".json" required>
    <button type="submit" class="button" style="background-color:#2196F3; color:white;">
      Upload JSON
    </button>
  </form>
</div>

<form action="./delete-all/" method="post" style="margin-top:10px;">
    {% csrf_token %}
    <button type="submit" class="button" style="background-color:#f44336; color:white;">
      ğŸ—‘ Delete All Comments
    </button>
</form>

{% if is_premium %}
<div style="margin-top: 10px;">
  <a href="./export-report/" class="button" style="background-color:#FF9800; color:white; text-decoration:none; display:inline-block; padding:10px 15px;">
    ğŸ“Š ãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›ï¼ˆæœ‰æ–™ãƒ—ãƒ©ãƒ³ï¼‰
  </a>
</div>
{% else %}
<div style="margin-top: 10px;">
  <button type="button" class="button" style="background-color:#9E9E9E; color:white; cursor:not-allowed;" disabled title="ã“ã®æ©Ÿèƒ½ã¯æœ‰æ–™ãƒ—ãƒ©ãƒ³ã®ã¿åˆ©ç”¨å¯èƒ½ã§ã™">
    ğŸ“Š ãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›ï¼ˆæœ‰æ–™ãƒ—ãƒ©ãƒ³ï¼‰
  </button>
  <span style="margin-left: 10px; color: #666; font-size: 12px;">â€» æœ‰æ–™ãƒ—ãƒ©ãƒ³ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹ã¨åˆ©ç”¨ã§ãã¾ã™</span>
</div>
{% endif %}
  


<script>
document.addEventListener("DOMContentLoaded", function() {
  const csvBtn = document.getElementById("toggleCsvForm");
  const jsonBtn = document.getElementById("toggleJsonForm");
  const csvForm = document.getElementById("csvUploadForm");
  const jsonForm = document.getElementById("jsonUploadForm");

  csvBtn.addEventListener("click", function() {
    csvForm.style.display = csvForm.style.display === "none" ? "block" : "none";
    jsonForm.style.display = "none";
  });

  jsonBtn.addEventListener("click", function() {
    jsonForm.style.display = jsonForm.style.display === "none" ? "block" : "none";
    csvForm.style.display = "none";
  });
});
</script>
{% endblock %}
